<!DOCTYPE html>
<html>
  <head>
    <title>Factorial</title>
  </head>
  <body>
    <button id="stopbutton" type='button'>Stop</button>
    <script>
        window.stopped = false;

        document.getElementById('stopbutton').onclick = function() {
            window.stopped = true;
        };
    </script>
    <script type='text/javascript'>
// Stop every call. Modify `iterations` to break less frequently.
let iterations = 0;
let counter = iterations;
function apply(f, k, ...args) {
    if (counter-- === 0) {
        counter = iterations;
        window.setTimeout(_ => {
            if (window.stopped) {
                console.log('terminated execution');
            } else {
                return f(k, ...args);
            }
        }, 0);
    } else {
        return f(k, ...args);
    }
}
(function (_k23) {
    return apply(function (_k25) {
        function fact(_k, x) {
            return apply(function (_k17) {
                return apply(function (_k16) {
                    if (x <= 1) return apply(function (_k3) {
                        return apply(function (_k2) {
                            return apply(_k, 1);
                        }, function (_k4) {
                            return apply(function (_k7) {
                                return apply(_k7, void 0);
                            }, _k3);
                        });
                    }, _k16);else return apply(function (_k9) {
                        return apply(fact, function (_app) {
                            return apply(function (_k11) {
                                return apply(function (_k8) {
                                    return apply(_k, x * _app);
                                }, function (_k12) {
                                    return apply(function (_k15) {
                                        return apply(_k15, void 0);
                                    }, _k11);
                                });
                            }, _k9);
                        }, x - 1);
                    }, _k16);
                }, function (_k18) {
                    return apply(function (_k21) {
                        return apply(_k21, void 0);
                    }, _k17);
                });
            }, _k);
        }

        return apply(_k25, fact);
    }, function (fact) {
        return apply(function (_k26) {
            return apply(fact, function (_app2) {
                return apply(function (_k28) {
                    return apply(function (_k22) {
                        apply(console.log, _app2);
                        return apply(_k22, void 0);
                    }, function (_k29) {
                        return apply(function (_k32) {
                            return apply(_k32, void 0);
                        }, _k28);
                    });
                }, _k26);
            }, 100);
        }, _k23);
    });
})(x=>x);
    </script>
  </body>
</html>
